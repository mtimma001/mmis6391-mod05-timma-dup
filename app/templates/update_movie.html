{% extends 'base.html' %}

{% block content %}
<h2>{% if movie %}Edit Movie{% else %}Add New Movie{% endif %}</h2>

<form action="{% if movie %}{{ url_for('movies.update_movie', movie_id=movie.movie_id) }}{% else %}{{ url_for('movies.movies') }}{% endif %}" method="POST">
    <div class="mb-3">
        <label for="title" class="form-label">Movie Title</label>
        <input type="text" class="form-control" id="title" name="title" value="{% if movie %}{{ movie.title }}{% endif %}" required>
    </div>
    <div class="mb-3">
        <label for="release_year" class="form-label">Release Year</label>
        <input type="number" class="form-control" id="release_year" name="release_year" value="{% if movie %}{{ movie.release_year }}{% endif %}" required>
    </div>
    <div class="mb-3">
        <label for="genres" class="form-label">Genres</label>
        <select multiple class="form-select" id="genres" name="genres">
            {% for genre in all_genres %}
                <option value="{{ genre.id }}" {% if genre.id in selected_genres %}selected{% endif %}>{{ genre.genre_name }}</option>
            {% endfor %}
        </select>
    </div>
    <button type="submit" class="btn btn-success">{% if movie %}Update Movie{% else %}Add Movie{% endif %}</button>
</form>
{% endblock %}
